"use strict";(self["webpackChunkmoire"]=self["webpackChunkmoire"]||[]).push([[212],{1212:function(e,o,t){t.r(o),t.d(o,{default:function(){return O}});var l=t(3396),s=t(7139),c=t(9242);const r=e=>((0,l.dD)("data-v-0957e2b2"),e=e(),(0,l.Cn)(),e),a={key:0,class:"content"},i={key:1,class:"content"},d={key:2,class:"content"},n={class:"item"},u={class:"item__pics pics"},_={class:"pics__wrapper"},p=["src","alt"],m={class:"pics__list"},g={key:0,class:"pics__item"},w=["onClick","onKeydown"],v=["src"],C={class:"item__info"},f={class:"item__code"},y={class:"item__title"},k={class:"item__form"},b={class:"item__row item__row--center"},D={class:"item__price"},h={class:"item__row"},I={class:"form__block"},z=r((()=>(0,l._)("legend",{class:"form__legend"}," Цвет ",-1))),P={class:"colors colors--black"},A={class:"colors__label"},S=["value","checked","onChange"],M={class:"form__block"},T=r((()=>(0,l._)("legend",{class:"form__legend"}," Размер ",-1))),Z={class:"form__label form__label--small form__label--select",for:"category"},H=["value"];function K(e,o,t,r,K,Y){const q=(0,l.up)("BaseLoader"),B=(0,l.up)("ProductCounter"),F=(0,l.up)("BaseModal");return e.productStatus.isLoading?((0,l.wg)(),(0,l.iD)("div",a,[(0,l.Wm)(q,{title:"Загрузка товаров...",style:{position:"relative"}},null,8,["title"])])):e.productStatus.isFailed?((0,l.wg)(),(0,l.iD)("div",i," Не удалось загрузить товар ")):((0,l.wg)(),(0,l.iD)("div",d,[(0,l._)("section",n,[(0,l._)("div",u,[(0,l._)("div",_,[(0,l._)("img",{class:"pics__img--large",src:e.currentProductData.image,alt:e.product.title},null,8,p)]),(0,l._)("ul",m,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.product.colors,(o=>((0,l.wg)(),(0,l.iD)(l.HY,{key:o.id},[o.id!==e.product.curColorId?((0,l.wg)(),(0,l.iD)("li",g,[(0,l._)("a",{class:"pics__link",onClick:t=>e.changeColor(o.id),onKeydown:t=>e.changeColor(o.id)},[(0,l._)("img",{class:"pics__img--tiny",src:o.gallery[0].file.url,alt:"Название товара"},null,8,v)],40,w)])):(0,l.kq)("",!0)],64)))),128))])]),(0,l._)("div",C,[(0,l._)("span",f,"Артикул: "+(0,s.zw)(e.product.id),1),(0,l._)("h2",y,(0,s.zw)(e.product.title),1),(0,l._)("div",k,[(0,l._)("form",{class:"form",action:"#",method:"POST",onSubmit:o[3]||(o[3]=(0,c.iM)(((...o)=>e.doAddToCart&&e.doAddToCart(...o)),["prevent"]))},[(0,l._)("div",b,[(0,l.Wm)(B,{count:e.currentProductData.amount,"onUpdate:count":o[0]||(o[0]=o=>e.currentProductData.amount=o)},null,8,["count"]),(0,l._)("b",D,(0,s.zw)(e.product.pricePretty)+" ₽ ",1)]),(0,l._)("div",h,[(0,l._)("fieldset",I,[z,(0,l._)("ul",P,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.product.colors,(o=>((0,l.wg)(),(0,l.iD)("li",{key:o.id,class:"colors__item"},[(0,l._)("label",A,[((0,l.wg)(),(0,l.iD)("input",{key:o.id,class:"colors__radio sr-only",type:"radio",name:"color",value:e.product.id,checked:e.product.curColorId==o.id,onChange:(0,c.iM)((t=>e.changeColor(o.id)),["prevent"])},null,40,S)),(0,l._)("span",{class:"colors__value",style:(0,s.j5)({backgroundColor:o.color.code})},null,4)])])))),128))])]),(0,l._)("fieldset",M,[T,(0,l._)("label",Z,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":o[1]||(o[1]=o=>e.currentProductData.size=o),class:"form__select",name:"category"},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.product.sizes,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.id,value:e.id},(0,s.zw)(e.title),9,H)))),128))],512),[[c.bM,e.currentProductData.size]])])])]),(0,l._)("button",{class:(0,s.C_)(["item__button button",{"button--secondary":e.isInCart,"button--primery":!e.isInCart}]),type:"submit"},(0,s.zw)(e.isInCart?"В корзине":"В корзину"),3),e.isAddedToCart?((0,l.wg)(),(0,l.j4)(F,{key:0,open:e.isShowAddedMessage,"onUpdate:open":o[2]||(o[2]=o=>e.isShowAddedMessage=o)},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)("Товар добавлен в корзину"))])),_:1},8,["open"])):(0,l.kq)("",!0)],32)])])])]))}var Y=t(4870),q=t(65),B=t(9098),F=t(2230),U=t(1542),j=t(8712),L=t(6130),W=(0,l.aZ)({components:{ProductCounter:U.Z,BaseLoader:j.Z,BaseModal:L.Z},props:{productId:{type:[Number,String],required:!0}},setup(e){const o=(0,q.oR)(),t=(0,Y.qj)({id:null,amount:null,color:null,size:null,image:null}),{product:s,fetchProduct:c,status:r}=(0,B.Z)(),{addToCart:a,status:i}=(0,F.Z)(),d=(0,Y.iH)(!1);c(e.productId);const n=e=>{const o=s.value.colors.find((o=>o.id===e)),{gallery:l}=o;t.color=o.color.id,t.image=l[0].file.url};(0,l.YP)([s],(()=>{t.id=s.value.id,t.amount=1,t.size=s.value.sizes[0].id,n(s.value.curColorId)}));const u=e=>{s.value.curColorId=e,n(e)},_=()=>{a(t),d.value=!0},p=(0,l.Fl)((()=>-1!==o.state.cartProducts.findIndex((e=>e.productId===t.id&&e.colorId===t.color&&e.sizeId===t.size))));return{product:s,currentProductData:t,description:(0,l.Fl)((()=>""===s.value.content?"Пока здесь ничего нет":s.value.content)),productStatus:r,isAddedToCart:(0,l.Fl)((()=>i.isAdded)),isShowAddedMessage:d,changeColor:u,doAddToCart:_,isInCart:p}}}),x=t(89);const N=(0,x.Z)(W,[["render",K],["__scopeId","data-v-0957e2b2"]]);var O=N}}]);
//# sourceMappingURL=212.e8127039.js.map