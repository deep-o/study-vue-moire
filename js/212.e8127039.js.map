{"version":3,"file":"js/212.e8127039.js","mappings":"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","sources":["webpack://moire/./src/components/product/ProductQuickView.vue","webpack://moire/./src/components/product/ProductQuickView.vue?f2a7"],"sourcesContent":["<!-- eslint-disable vuejs-accessibility/label-has-for -->\n<template>\n  <div\n    v-if=\"productStatus.isLoading\"\n    class=\"content\"\n  >\n    <BaseLoader\n      :title=\"'Загрузка товаров...'\"\n      style=\"position:relative\"\n    />\n  </div>\n\n  <div\n    v-else-if=\"productStatus.isFailed\"\n    class=\"content\"\n  >\n    Не удалось загрузить товар\n  </div>\n\n  <div\n    v-else\n    class=\"content\"\n  >\n    <section class=\"item\">\n      <div class=\"item__pics pics\">\n        <div class=\"pics__wrapper\">\n          <img\n            class=\"pics__img--large\"\n            :src=\"currentProductData.image\"\n            :alt=\"product.title\"\n          >\n        </div>\n        <ul class=\"pics__list\">\n          <template\n            v-for=\"img in product.colors\"\n            :key=\"img.id\"\n          >\n            <li\n              v-if=\"img.id !== product.curColorId\"\n              class=\"pics__item\"\n            >\n              <a\n                class=\"pics__link\"\n                @click=\"changeColor(img.id)\"\n                @keydown=\"changeColor(img.id)\"\n              >\n                <img\n                  class=\"pics__img--tiny\"\n                  :src=\"img.gallery[0].file.url\"\n                  alt=\"Название товара\"\n                >\n              </a>\n            </li>\n          </template>\n        </ul>\n      </div>\n\n      <div class=\"item__info\">\n        <span class=\"item__code\">Артикул: {{ product.id }}</span>\n        <h2 class=\"item__title\">\n          {{ product.title }}\n        </h2>\n        <div class=\"item__form\">\n          <form\n            class=\"form\"\n            action=\"#\"\n            method=\"POST\"\n            @submit.prevent=\"doAddToCart\"\n          >\n            <div class=\"item__row item__row--center\">\n              <ProductCounter\n                v-model:count=\"currentProductData.amount\"\n              />\n\n              <b class=\"item__price\">\n                {{ product.pricePretty }} ₽\n              </b>\n            </div>\n\n            <div class=\"item__row\">\n              <fieldset class=\"form__block\">\n                <legend class=\"form__legend\">\n                  Цвет\n                </legend>\n                <ul class=\"colors colors--black\">\n                  <li\n                    v-for=\"color in product.colors\"\n                    :key=\"color.id\"\n                    class=\"colors__item\"\n                  >\n                    <label\n                      class=\"colors__label\"\n                    >\n                      <input\n                        :key=\"color.id\"\n                        class=\"colors__radio sr-only\"\n                        type=\"radio\"\n                        name=\"color\"\n                        :value=\"product.id\"\n                        :checked=\"product.curColorId == color.id ? true : false\"\n                        @change.prevent=\"changeColor(color.id)\"\n                      >\n                      <span\n                        class=\"colors__value\"\n                        :style=\"{backgroundColor: color.color.code}\"\n                      />\n                    </label>\n                  </li>\n                </ul>\n              </fieldset>\n\n              <fieldset class=\"form__block\">\n                <legend class=\"form__legend\">\n                  Размер\n                </legend>\n                <label\n                  class=\"form__label form__label--small form__label--select\"\n                  for=\"category\"\n                >\n                  <select\n                    v-model=\"currentProductData.size\"\n                    class=\"form__select\"\n                    name=\"category\"\n                  >\n                    <option\n                      v-for=\"size in product.sizes\"\n                      :key=\"size.id\"\n                      :value=\"size.id\"\n                    >\n                      {{ size.title }}\n                    </option>\n                  </select>\n                </label>\n              </fieldset>\n            </div>\n\n            <button\n              class=\"item__button button\"\n              :class=\"{ 'button--secondary': isInCart, 'button--primery': !isInCart}\"\n              type=\"submit\"\n            >\n              {{ isInCart ? 'В корзине' : 'В корзину' }}\n            </button>\n\n            <BaseModal\n              v-if=\"isAddedToCart\"\n              v-model:open=\"isShowAddedMessage\"\n            >\n              {{ 'Товар добавлен в корзину' }}\n            </BaseModal>\n          </form>\n        </div>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\nimport {\n  defineComponent, ref, reactive, watch, computed,\n} from 'vue';\n\nimport { useStore } from 'vuex';\n\nimport useProduct from '@/hooks/useProduct';\nimport useCart from '@/hooks/useCart';\n\nimport ProductCounter from '@/components/product/ProductCounter.vue';\nimport BaseLoader from '@/components/base/BaseLoader.vue';\nimport BaseModal from '@/components/base/BaseModal.vue';\n\nexport default defineComponent({\n  components: { ProductCounter, BaseLoader, BaseModal },\n  props: {\n    productId: { type: [Number, String], required: true },\n  },\n\n  setup(props) {\n    const store = useStore();\n    const currentProductData = reactive({\n      id: null, amount: null, color: null, size: null, image: null,\n    });\n    const { product, fetchProduct, status: productStatus } = useProduct();\n    const { addToCart, status: addStatus } = useCart();\n\n    const isShowAddedMessage = ref(false);\n\n    fetchProduct(props.productId);\n\n    const getColorData = (id) => {\n      const currentColor = product.value.colors.find(\n        (color) => color.id === id,\n      );\n      const { gallery } = currentColor;\n      currentProductData.color = currentColor.color.id;\n      currentProductData.image = gallery[0].file.url;\n    };\n\n    watch([product], () => {\n      currentProductData.id = product.value.id;\n      currentProductData.amount = 1;\n      currentProductData.size = product.value.sizes[0].id;\n      getColorData(product.value.curColorId);\n    });\n\n    const changeColor = (id) => {\n      product.value.curColorId = id;\n      getColorData(id);\n    };\n\n    const doAddToCart = () => {\n      addToCart(currentProductData);\n      isShowAddedMessage.value = true;\n    };\n\n    const isInCart = computed(() => store.state.cartProducts.findIndex(\n      (item) => item.productId === currentProductData.id\n      && item.colorId === currentProductData.color && item.sizeId === currentProductData.size,\n    ) !== -1);\n\n    return {\n      product,\n      currentProductData,\n\n      description: computed(() => (product.value.content === '' ? 'Пока здесь ничего нет' : product.value.content)),\n\n      productStatus,\n      isAddedToCart: computed(() => addStatus.isAdded),\n      isShowAddedMessage,\n\n      changeColor,\n      doAddToCart,\n\n      isInCart,\n    };\n  },\n});\n\n</script>\n\n<style scoped>\n  .sr-only:checked + span::before {\n      border-color: var(--border-color);\n    }\n  .colors__value {\n    box-shadow: 0 0 10px rgba(0,0,0,0.15);\n  }\n\n  ul {\n    padding: 0;\n  }\n\n  li {\n    list-style-type: none;\n  }\n\n  p {\n    margin: 0;\n  }\n\n  .tabs__link {\n    cursor: pointer;\n  }\n\n  .content {\n    padding-top: 0;\n    padding-bottom: 0;\n  }\n\n  .item {\n    grid-template-columns: 1fr;\n    grid-gap: 20px;\n  }\n\n  .item__pics {\n    display: grid;\n    grid-template-columns: fit-content(100%) fit-content(100%);\n    grid-gap: 20px;\n  }\n\n  .item__title {\n    font-size: 30px;\n  }\n\n  .item__price {\n    font-size: 30px;\n  }\n\n  .pics__img--large {\n    width: 200px;\n    height: 200px;\n  }\n\n  .pics__img--tiny {\n    width: 98px;\n    height: 98px;\n  }\n\n  .button--secondary {\n    background-color: aquamarine;\n  }\n</style>\n","import { render } from \"./ProductQuickView.vue?vue&type=template&id=0957e2b2&scoped=true\"\nimport script from \"./ProductQuickView.vue?vue&type=script&lang=js\"\nexport * from \"./ProductQuickView.vue?vue&type=script&lang=js\"\n\nimport \"./ProductQuickView.vue?vue&type=style&index=0&id=0957e2b2&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Documents\\\\skillbox\\\\Vue\\\\итоговая\\\\moire\\\\final_project_vue.js\\\\project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0957e2b2\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","for","_ctx","isLoading","_createElementBlock","_hoisted_1","_createVNode","_component_BaseLoader","title","style","isFailed","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","src","image","alt","_hoisted_8","_Fragment","colors","img","id","curColorId","_hoisted_9","onClick","onKeydown","gallery","file","url","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","action","method","onSubmit","_hoisted_16","_component_ProductCounter","count","amount","_hoisted_17","pricePretty","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","color","key","_hoisted_22","type","name","value","checked","onChange","backgroundColor","code","_hoisted_24","_hoisted_25","_hoisted_26","size","sizes","_createBlock","_component_BaseModal","open","defineComponent","components","ProductCounter","BaseLoader","BaseModal","props","productId","Number","String","required","setup","store","useStore","currentProductData","reactive","product","fetchProduct","status","productStatus","useProduct","addToCart","addStatus","useCart","isShowAddedMessage","ref","getColorData","currentColor","find","watch","changeColor","doAddToCart","isInCart","computed","state","cartProducts","findIndex","item","colorId","sizeId","description","content","isAddedToCart","isAdded","__exports__","render"],"sourceRoot":""}